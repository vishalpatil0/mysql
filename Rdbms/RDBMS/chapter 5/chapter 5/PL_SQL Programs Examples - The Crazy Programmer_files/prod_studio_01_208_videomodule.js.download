self.studioLoader.context.evalInContext("var nm=function(a){return(a=a.exec(Ub))?a[1]:\"\"};(function(){if(rh)return nm(/Firefox\\/([0-9.]+)/);if(jc||kc||ic)return tc;if(vh)return ec()?nm(/CriOS\\/([0-9.]+)/):nm(/Chrome\\/([0-9.]+)/);if(wh&&!ec())return nm(/Version\\/([0-9.]+)/);if(sh||th){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(Ub);if(a)return a[1]+\".\"+a[2]}else if(uh)return(a=nm(/Android\\s+([0-9.]+)/))?a:nm(/Version\\/([0-9.]+)/);return\"\"})();var om={},pm=/OS (\\S+) like/,qm=/Android (\\S+);/,rm=function(a,b){null==om[b]&&((a=a.exec(Ub))?(a=a[1].replace(/_/g,\".\"),om[b]=0<=xb(a,b)):om[b]=!1);return om[b]};var sm=function(){J.call(this);this.f=this.h=this.c=!1;this.b=0;this.j=[];this.v=!1};y(sm,J);var tm=function(a,b){null==b||a.c||(a.a=b,a.C=!sh&&!th,a.w=sh||th,a.C?a.a.addEventListener(\"click\",w(a.o,a),!1):a.w&&(a.a.addEventListener(\"touchstart\",w(a.M,a),!1),a.a.addEventListener(\"touchmove\",w(a.K,a),!1),a.a.addEventListener(\"touchend\",w(a.D,a),!1)),a.c=!0)},um=function(a){null!=a.a&&a.c&&(a.c=!1,a.C?a.a.removeEventListener(\"click\",w(a.o,a),!1):a.w&&(a.a.removeEventListener(\"touchstart\",w(a.M,a),!1),a.a.removeEventListener(\"touchmove\",w(a.K,a),!1),a.a.removeEventListener(\"touchend\",w(a.D,a),!1)))};sm.prototype.M=function(a){this.h=!0;this.b=a.touches.length;this.v=vm(this,a.touches)||1!=a.touches.length;wm(this,a.touches)};sm.prototype.K=function(a){this.f=!0;this.b=a.touches.length};sm.prototype.D=function(a){this.h&&1==this.b&&!this.f&&!this.v&&vm(this,a.changedTouches)&&this.dispatchEvent(new I(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.h=!1)};sm.prototype.o=function(){this.dispatchEvent(new I(\"click\"))};var wm=function(a,b){a.j=[];b.forEach(function(b){a.j.push(b.identifier)})},vm=function(a,b){return b.some(function(b){return a.j.includes(b.identifier)})};var xm=function(a){I.call(this,a)};y(xm,I);var ym=function(){J.call(this)};y(ym,J);var zm=function(){J.call(this);this.f=new G;this.j=new sm;this.o=\"none\"};y(zm,J);var Cm=function(a){this.width=Am(a).width;this.height=Am(a).height;this.c=!1;this.b=a.a.muted;this.a=Bm(a);this.volume=a.a.volume};Cm.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};zm.prototype.s=function(){Dm(this);zm.l.s.call(this)};var Dm=function(a){null!=a.b&&a.b.dispose();null!=a.h&&a.h.dispose();null!=a.a&&Em(a.a);a.f.clear();um(a.j)},X=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),a.dispatchEvent(new xm(b)))},Fm=function(a,b){null!=a.f.get(b)&&Ud(a.f,b)};g=zm.prototype;g.rd=function(){a:{var a=this.a;if(a.a.seeking&&!a.h)a.h=!0,a.j=Gm(a);else{if(!a.a.seeking&&a.h){a.h=!1;var b=0!=a.a.currentTime&&a.a.currentTime<a.j;a.j=-1;break a}if(!a.a.seeking&&0!=a.a.currentTime&&Gm(a)>a.a.currentTime){b=.5<Gm(a)-a.a.currentTime;break a}}b=!1}a=Hm(this.a);if(b&&(X(this,\"rewind\",!1),-1!=a)){Gm(this.a)>=.75*a||Fm(this,\"thirdquartile\");Gm(this.a)>=.5*a||Fm(this,\"midpoint\");Gm(this.a)>=.25*a||Fm(this,\"firstquartile\");a:{b=this.a;for(var c=b.c.I(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=b.c;c=0==c.T()?null:c.get(c.T()-1);b.c.clear();.5<=c&&b.c.add(c);b=!0;break a}b=!1}b&&X(this,\"replay\",!1)}-1!=a&&(Gm(this.a)>=.25*a&&X(this,\"firstquartile\",!0),Gm(this.a)>=.5*a&&X(this,\"midpoint\",!0),Gm(this.a)>=.75*a&&X(this,\"thirdquartile\",!0))};g.qd=function(){X(this,\"creativeview\",!0);null!=this.v?(this.b.A(this.j,\"click\",this.md,!1),tm(this.j,this.v)):this.b.A(this.a,\"click\",this.Td);X(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&X(this,\"mute\",!1)};g.sd=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?X(this,\"unmute\",!1):this.c.muted(a,b)&&X(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.pd=function(){if(this.a.a.ended)X(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.o)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?X(this,\"stop\",!0):Im(this.a)&&!this.a.a.seeking&&(this.c.c=!0,X(this,\"pause\",!1))}};g.Sd=function(){this.c.c&&(this.c.c=!1,X(this,\"resume\",!1))};g.nd=function(){var a=this.a;if(!uh||uh&&rm(qm,2.3))a=!0;else{var b=a.a.duration-Gm(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.o&&Im(this.a)?X(this,\"stop\",!0):X(this,\"complete\",!0):this.a.a.pause()};g.md=function(){X(this,\"click\",!1)};g.od=function(){X(this,\"error\",!1)};g.Td=function(){X(this,\"click\",!1)};g.Wb=function(){this.c.a=!0;X(this,\"fullscreen\",!1)};g.Vb=function(){this.c.a=!1};g.Rd=function(){var a=Am(this.a),b=Bm(this.a),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.Wb():this.c.a&&!b&&this.Vb(),this.c.width=a.width,this.c.height=a.height};var Jm=function(){this.b=0;this.a=[]};g=Jm.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%4;return b};g.get=function(a){a=Km(this,a);return this.a[a]};g.set=function(a,b){a=Km(this,a);this.a[a]=b};g.T=function(){return this.a.length};g.clear=function(){this.b=this.a.length=0};g.I=function(){var a=this.T(),b=this.T(),c=[];for(a=this.T()-a;a<b;a++)c.push(this.get(a));return c};g.N=function(){for(var a=[],b=this.T(),c=0;c<b;c++)a[c]=c;return a};g.P=function(a){return a<this.T()};g.za=function(a){for(var b=this.T(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var Km=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return 4>a.a.length?b:(a.b+Number(b))%4};var Lm=function(a){J.call(this);this.a=a;this.c=new Jm;this.j=-1;this.o=this.h=!1};y(Lm,ym);var Hm=function(a){return isNaN(a.a.duration)?-1:a.a.duration},Im=function(a){return a.a.paused?sh||th||vh?a.a.currentTime<a.a.duration:!0:!1},Bm=function(a){return sh?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},Gm=function(a){for(a=a.c.I();a.length;){var b=a.pop();if(0<b)return b}return-1},Am=function(a){return new Oc(a.a.offsetWidth,a.a.offsetHeight)};Lm.prototype.s=function(){Lm.l.s.call(this);Em(this)};var Em=function(a){null!=a.f&&(um(a.f),a.f=null);null!=a.b&&(a.b.dispose(),a.b=null);a.j=-1;a.o=!1;a.h=!1;a.c.clear()},Mm=function(a,b){a.o||(a.o=!0,a.dispatchEvent(\"start\"),!uh&&(!sh||(sh||th)&&rm(pm,4))||a.Xb(b))};g=Lm.prototype;g.Qd=function(){wh&&(this.a.currentTime=.001)};g.cc=function(a){this.dispatchEvent(\"play\");sh||th||Mm(this,a)};g.zd=function(a){this.o||((sh||th)&&0<this.a.currentTime&&Mm(this,a),mc&&this.cc(a));this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Ad=function(){this.dispatchEvent(\"volumeChange\")};g.yd=function(){this.dispatchEvent(\"pause\")};g.vd=function(){this.dispatchEvent(\"end\")};g.Xb=function(){this.dispatchEvent(\"beginFullscreen\")};g.xd=function(){this.dispatchEvent(\"endFullscreen\")};g.wd=function(){this.dispatchEvent(\"error\")};g.ud=function(){this.dispatchEvent(\"click\")};var Nm={},Om=function(a){this.j=a;this.f=this.g=!0;this.c=new zm;this.c.o=\"pausedAtBeginning\";this.B=this.a=this.b=null;Ci(w(this.C,this))},Pm=new G;Om.prototype.v=!1;Om.prototype.o=!1;Om.prototype.h=!0;var Qm=function(a){var b=Pm.get(a);null==b&&(b=new Om(a),Pm.set(a,b));return b};Om.prototype.C=function(a){this.a=a;Rm(this)};var Rm=function(a){Sm(a,!1);Sm(a,!0);if(null!=a.a&&null!=a.B){var b=a.c,c=a.b;Dm(b);b.a=c;c=b.a;Em(c);c.b=new L(c);c.b.A(c.a,\"canplay\",c.Qd);c.b.A(c.a,\"ended\",c.vd);c.b.A(c.a,\"webkitbeginfullscreen\",c.Xb);c.b.A(c.a,\"webkitendfullscreen\",c.xd);c.b.A(c.a,\"pause\",c.yd);c.b.A(c.a,\"playing\",c.cc);c.b.A(c.a,\"timeupdate\",c.zd);c.b.A(c.a,\"volumechange\",c.Ad);c.b.A(c.a,\"error\",c.wd);c.f=new sm;c.b.A(c.f,\"click\",c.ud,!1);tm(c.f,c.a);b.c=new Cm(b.a);b.v=null;b.b=new L(b);b.b.A(b.a,\"timeUpdate\",b.rd,!1);b.b.A(b.a,\"volumeChange\",b.sd,!1);b.b.A(b.a,\"pause\",b.pd,!1);b.b.A(b.a,\"play\",b.Sd,!1);b.b.A(b.a,\"end\",b.nd,!1);b.b.A(b.a,\"beginFullscreen\",b.Wb,!1);b.b.A(b.a,\"endFullscreen\",b.Vb,!1);b.b.A(b.a,\"start\",b.qd,!1);b.b.A(b.a,\"error\",b.od,!1);b.h=new He(1E3);Pf(b.b,b.h,\"tick\",b.Rd,!1,b);b.h.start();a.b.A(\"timeUpdate\",a.tc,!1,a);a.B.paused?a.c.A(\"start\",a.Pa,!1,a):a.Pa()}},Sm=function(a,b){Tm(a,b,\"resume\",a.Pa);Tm(a,b,\"replay\",a.Xd);Tm(a,b,\"pause\",a.Ud);Tm(a,b,\"stop\",a.je);Tm(a,b,\"mute\",a.Nd);Tm(a,b,\"unmute\",a.qe);Tm(a,b,\"firstquartile\",a.Mc);Tm(a,b,\"midpoint\",a.Md);Tm(a,b,\"thirdquartile\",a.oe);Tm(a,b,\"complete\",a.Cc)},Tm=function(a,b,c,d){(b?a.c.A:a.c.ba).call(a.c,c,d,!1,a)};g=Om.prototype;g.Pa=function(){this.c.ba(\"start\",this.Pa,!1,this);Um(this,\"play\",!this.h);Vm(this,\"Start\");this.h=!1;null!=this.a&&this.f&&!this.v&&(this.a.v(),this.v=!0)};g.Xd=function(){Um(this,\"replay\",!0);Vm(this,\"Stop\");this.g=!1};g.Ud=function(){Um(this,\"pause\",!0);Vm(this,\"Stop\")};g.je=function(){Um(this,\"stop\",!0);Vm(this,\"Stop\");this.g=!1};g.Nd=function(){Um(this,\"mute\",!this.h)};g.qe=function(){Um(this,\"unmute\",!this.h)};g.Mc=function(){Um(this,\"firstquartile\")};g.Md=function(){Um(this,\"midpoint\")};g.oe=function(){Um(this,\"thirdquartile\")};g.Cc=function(){Um(this,\"complete\");Vm(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.o&&(this.a.v(),this.o=!0)};g.tc=function(a){M(this.a.F,\"updateVideoProgress\",[\"EVENT_VIDEO_\"+a.type.toUpperCase(),Hm(this.b),this.b.a.currentTime])};var Um=function(a,b,c){null!=a.a&&a.f&&(c&&eh(a.a.b,\"Count\",a.j,\"EVENT_VIDEO_INTERACTION\"),eh(a.a.b,\"Count\",a.j,\"EVENT_VIDEO_\"+b.toUpperCase()))},Vm=function(a,b){null!=a.a&&a.f&&a.g&&eh(a.a.b,b,a.j,\"EVENT_VIDEO_VIEW_TIMER\")};var Wm=function(a){H.call(this);this.c=a;this.a={};this.b=null;Ci(w(this.g,this))};y(Wm,H);q(\"studio.video.Reporter\",Wm,void 0);var Xm=new G,Ym=function(a,b,c){var d=Qm(a);\"boolean\"==typeof c&&(d.h=c);Dm(d.c);d.g=!0;d.f=!0;d.B=b;d.b=new Lm(d.B);Rm(d);Xm.P(a)||Xm.set(a,new Wm(b))};Wm.attach=Ym;Wm.prototype.g=function(a){this.b=a;this.b.Ab(this.c)};Wm.prototype.s=function(){for(var a in this.a)this.c[a]=this.a[a];Wm.l.s.call(this)};var Zm=function(a){a=Qm(a);null==a.b||Im(a.b)||a.b.a.ended||(Um(a,\"stop\",!1),Vm(a,\"Stop\"),a.g=!1);Sm(a,!1);a.f=!1;a.B=null;Dm(a.c);a.b&&(a.b.ba(\"timeUpdate\",a.tc,!1,a),a.b.dispose())};Wm.detach=Zm;var $m=function(){};var an,bn=function(){};y(bn,$m);var cn=function(a){a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var b=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],c=0;c<b.length;c++){var d=b[c];try{new ActiveXObject(d);var e=a.a=d;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}e=a.a}return e?new ActiveXObject(e):new XMLHttpRequest};an=new bn;var en=function(a,b){b=b?Xa(b):{};b.responseType=\"blob\";return dn(\"GET\",a,b).then(function(a){return a.response})},dn=function(a,b,c){var d=c||{},e=d.ue?cn(d.ue):cn(an);return pd(new gd(function(c,k){var f;try{e.open(a,b,!0)}catch(Z){k(new fn(\"Error opening XHR: \"+Z.message,b,e))}e.onreadystatechange=function(){if(4==e.readyState){h.clearTimeout(f);a:switch(e.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break a;default:a=!1}!a&&(a=0===e.status)&&(a=b.match(uf)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?c(e):k(new gn(e.status,b,e))}};e.onerror=function(){k(new fn(\"Network error\",b,e))};if(d.headers){for(var D in d.headers){var C=d.headers[D];null!=C&&e.setRequestHeader(D,C)}C=d.headers[\"Content-Type\"]}D=h.FormData&&!1;\"POST\"!=a||void 0!==C||D||e.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");d.withCredentials&&(e.withCredentials=d.withCredentials);d.responseType&&(e.responseType=d.responseType);d.mimeType&&e.overrideMimeType(d.mimeType);0<d.pe&&(f=h.setTimeout(function(){e.onreadystatechange=r;e.abort();k(new hn(b,e))},d.pe));try{e.send(null)}catch(Z){e.onreadystatechange=r,h.clearTimeout(f),k(new fn(\"Error sending XHR: \"+Z.message,b,e))}}),function(a){a instanceof qd&&e.abort();throw a;})},fn=function(a,b){za.call(this,a+\", url=\"+b);this.url=b};y(fn,za);fn.prototype.name=\"XhrError\";var gn=function(a,b,c){fn.call(this,\"Request Failed, status=\"+a,b,c);this.status=a};y(gn,fn);gn.prototype.name=\"XhrHttpError\";var hn=function(a,b){fn.call(this,\"Request timed out\",a,b)};y(hn,fn);hn.prototype.name=\"XhrTimeoutError\";q(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return Di().then(function(b){b=b.Ba(a);return\"file:\"==window.location.protocol?kd(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):sb(b,\"/itag/\")?jn(kn(b)).then(en):en(b)})},void 0);var jn=function(a){return dn(\"HEAD\",a).then(function(b){return ln(b)?dn(\"GET\",a).then(function(a){return jn(a.response)}):a})},kn=function(a){return sb(a,\"/itag/\")&&!sb(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},ln=function(a){a=a.getResponseHeader(\"Content-Type\");return sb(a,\"text/plain\")};");
